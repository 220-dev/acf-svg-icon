(function($){function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}function initialize_field($field){var fetchSvg=function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(url,id,text){var req,svg;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(url);case 2:req=_context.sent;_context.next=5;return req.text();case 5:svg=_context.sent;$('span[data-id="'+id+'"]').html(svg+text);case 7:case"end":return _context.stop()}}},_callee,this)}));return function fetchSvg(_x,_x2,_x3){return _ref.apply(this,arguments)}}();var input=$field.find(".acf-input input");var allowClear=$(input).attr("data-allow-clear")||0;var opts={dropdownCssClass:"bigdrop widefat",dropdownAutoWidth:true,formatResult:svg_icon_format,formatSelection:svg_icon_format_small,data:{results:svg_icon_format_data},allowClear:1==allowClear};input.select2(opts);function svg_icon_format(css){if(!css.id){return css.text}if(css.url){fetchSvg(css.url,css.id,css.text);return $('<span class="acf_svg__icon icon" data-id="'+css.id+'">'+css.text+"</span>")}else{return $('<svg class="acf_svg__icon icon '+css.id+'" aria-hidden="true" role="img"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#'+css.id+'"></use></svg>'+css.text)}}function svg_icon_format_small(css){if(!css.id){return css.text}if(css.url){fetchSvg(css.url,css.id,css.text);return $('<span class="acf_svg__icon icon" data-id="'+css.id+'">'+css.text+"</span>")}else{return $('<svg class="acf_svg__icon icon '+css.id+'" aria-hidden="true" role="img"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#'+css.id+'"></use></svg>'+css.text)}}}acf.add_action("ready append",function(jQueryel){acf.get_fields({type:"svg_icon"},jQueryel).each(function(){initialize_field($(this))})})});